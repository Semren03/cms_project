@using cms_project.Models.ViewModel
    @model ComplaintViewModel

<h1 class="mb-4">Complaint Register Form</h1>

<form asp-action="Create" method="post" enctype="multipart/form-data" id="complaintForm">
    <section id="personal-information-content" class="tab-content active pt-0 mt-4">
        <div class="row">
            <div class="col-lg-6">
                <div id="fixed-autocomplete-container" class="position-relative mb-3">
                    <label for="txtEmployeeName" class="form-label">Complaint Title</label>
                    <input type="text" id="txtEmployeeName" maxlength="150" class="inputCustom form-control" asp-for="Title" required />
                    <span asp-validation-for="Title" class="text-danger"></span>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="position-relative mb-3">
                    <label for="txtRequestDate" class="form-label">Request Date</label>
                    <div class="position-relative">
                        <input type="text" id="txtRequestDate" maxlength="150" class="inputCustom form-control" asp-for="CreatedDate" readonly />
                        <div style="background-color:#F1D68E !important" class="position-absolute calender-icon right-0 top-0">
                            <img src="~/images/calendar-icon.svg" alt="calendar">
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-12">
                <div class="mb-3">
                    <label for="txtComments" class="form-label">Description</label>
                    <textarea class="w-100 form-control" id="txtComments" maxlength="1000" rows="4" asp-for="Description" required></textarea>
                    <div class="d-flex justify-content-end">
                        <small class="text-muted" id="charCount">0/1000</small>
                    </div>
                    <span asp-validation-for="Description" class="text-danger"></span>
                </div>
            </div>

            <div class="col-lg-6">
                <div id="fixed-autocomplete-container" class="position-relative mb-3">
                    <label for="ComplaintTypeId" class="form-label">Complaint Category</label>
                    <select class="inputCustom form-select" asp-for="ComplaintTypeId" required>
                        <option value="">-- Select Complaint Type --</option>
                        @foreach (var complaint in Model.ComplaintTypeList)
                        {
                            <option value="@complaint.Id">@complaint.Name</option>
                        }
                    </select>
                    <span asp-validation-for="ComplaintTypeId" class="text-danger"></span>
                </div>
            </div>

            <div class="col-lg-6">
                <div id="fixed-autocomplete-container" class="position-relative mb-3">
                    <label for="Attachments" class="form-label">Upload Attachments</label>
                    <input type="file" id="Attachments" class="inputCustom form-control" asp-for="Attachments" multiple>
                    <small class="text-muted">Upload relevant documents or images (optional)</small>
                    <span asp-validation-for="Attachments" class="text-danger"></span>
                </div>
            </div>
        </div>
    </section>

    <div class="d-flex flex-row-reverse gap-3 mt-4">
        <button type="submit" id="btnSubmit" class="action-btn btn-submit">
            <span class="btn-text">Submit</span>
            <div class="spinner-border spinner-border-sm text-dark d-none" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </button>
        <button type="button" id="btnCancel" class="action-btn btn-cancel">Cancel</button>
    </div>
</form>

<div id="successMessage" class="notification-box success-box" style="display:none;">
    <div class="notification-icon">
        <span class="tick">✓</span>
    </div>
    <div class="notification-content">
        <h4 class="notification-title">Success!</h4>
        <p class="notification-message">Your complaint has been successfully submitted.</p>
    </div>
</div>

<div id="cancelConfirmModal" class="modal fade" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Confirm Cancellation</h5>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to cancel? All entered information will be lost.</p>
            </div>
            <div class="modal-footer">
                <button type="button" id="noContinueBtn" class="action-btn btn-secondary">No, Continue Editing</button>
                <button type="button" id="yesCancelBtn" class="action-btn btn-cancel">Yes, Cancel</button>
            </div>
        </div>
    </div>
</div>

<link rel="stylesheet" href="~/css/Complaint-form.css" />
<script src="~/js/Complaint-form.js" asp-append-version="true"></script>
@* <div class="container"> *@
@*     <div class="row justify-content-center"> *@
@*         <div class="col-md-8"> *@
@*             <div class="card shadow mt-4 mb-4"> *@
@*                 <div class="card-header bg-primary text-white"> *@
@*                     <h4 class="mb-0">Submit New Complaint</h4> *@
@*                 </div> *@
@*                 <div class="card-body"> *@
@*                     <form method="post" enctype="multipart/form-data"> *@
@*                         <div class="mb-4"> *@
@*                             <label class="form-label fw-bold">Complaint Type</label> *@
@*                             <select class="form-select" asp-for="@Model.ComplaintTypeId"> *@
@*                                 <option value="">-- Select Complaint Type --</option> *@

@*                                 @foreach (var complaint in Model.ComplaintTypeList) *@
@*                                 { *@
@*                                     <option value="@complaint.Id">@complaint.Name</option> *@

@*                                 } *@
                            
@*                             </select> *@
@*                             <span asp-validation-for="ComplaintTypeId" class="text-danger"></span> *@
@*                         </div> *@

@*                         <div class="row mb-3"> *@
@*                             <label class="col-sm-3 col-form-label">Title</label> *@
@*                             <div class="col-sm-9"> *@
@*                                 <input class="form-control" asp-for="Title"> *@
@*                                 <span asp-validation-for="Title" class="text-danger"></span> *@
@*                             </div> *@
@*                         </div> *@

@*                         <div class="row mb-3"> *@
@*                             <label class="col-sm-3 col-form-label">Description</label> *@
@*                             <div class="col-sm-9"> *@
@*                                 <textarea class="form-control" asp-for="Description" rows="5"></textarea> *@
@*                                 <span asp-validation-for="Description" class="text-danger"></span> *@
@*                             </div> *@
@*                         </div> *@


@*                         <div class="row mb-4"> *@
@*                             <label class="col-sm-3 col-form-label">Upload Files</label> *@
@*                             <div class="col-sm-9"> *@
@*                                 <input type="file" class="form-control" asp-for="Attachments" multiple> *@
@*                                 <small class="text-muted">You can upload multiple files at once</small> *@
@*                                 <span asp-validation-for="Attachments" class="text-danger"></span> *@
@*                             </div> *@
@*                         </div> *@

@*                         <div class="row"> *@
@*                             <div class="col-sm-6 d-grid"> *@
@*                                 <a class="btn btn-outline-secondary" asp-controller="Complaints" asp-action="Index" role="button"> *@
@*                                     Cancel *@
@*                                 </a> *@
@*                             </div> *@
@*                             <div class="col-sm-6 d-grid"> *@
@*                                 <button type="submit" class="btn btn-primary">Submit</button> *@
@*                             </div> *@
@*                         </div> *@
@*                     </form> *@
@*                 </div> *@
@*             </div> *@
@*         </div> *@
@*     </div> *@
@* </div> *@

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}